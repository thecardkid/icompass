language: node_js
node_js:
- '7'
services:
- docker
install:
- docker pull thecardkid/e2e:latest
- npm install --depth 0
- npm run build
- npm install -gq --depth 0 mocha eslint eslint-plugin-react@latest
- cd ..
script:
- docker run --name dc thecardkid/e2e & sleep 5
- docker cp icompass dc:.
- docker exec dc bash -c "cd icompass; npm test"