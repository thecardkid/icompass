language: node_js
node_js:
- '7'
services:
- docker
install:
- docker pull thecardkid/e2e:latest
- npm install --depth 0
- npm run build
- npm install -gq --depth 0 mocha
script:
- npm i -q --depth 0 eslint eslint-plugin-react@latest
- ./node_modules/eslint/bin/eslint.js -c config/.eslintrc.js src/*/* test/*/* lib/* models/*
- cd ..
- docker run -d --log-driver=none --name dc thecardkid/e2e & sleep 5
- docker cp icompass dc:.
- docker exec dc bash -c "cd icompass; npm test"